<div class="container mx-auto p-4">
  <h1 class="text-3xl font-bold mb-6 text-gray-800">
    {{ isEditMode ? 'Editar Usuario' : 'Nuevo Usuario' }}
  </h1>

  <div class="bg-white p-8 rounded-lg shadow-md">
    <form [formGroup]="usuarioForm" (ngSubmit)="onSubmit()" class="space-y-6">

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Nombre -->
        <div>
          <label for="nombre" class="block text-sm font-medium text-gray-700">Nombre</label>
          <input id="nombre" formControlName="nombre" type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
          <app-form-control-error [control]="usuarioForm.get('nombre')"></app-form-control-error>
        </div>

        <!-- Apellido -->
        <div>
          <label for="apellido" class="block text-sm font-medium text-gray-700">Apellido</label>
          <input id="apellido" formControlName="apellido" type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
          <app-form-control-error [control]="usuarioForm.get('apellido')"></app-form-control-error>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Email -->
        <div>
          <label for="email" class="block text-sm font-medium text-gray-700">Correo Electr칩nico</label>
          <input id="email" formControlName="email" type="email" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
          <app-form-control-error [control]="usuarioForm.get('email')"></app-form-control-error>
        </div>

        <!-- Contrase침a -->
        <div>
          <label for="password" class="block text-sm font-medium text-gray-700">
            Contrase침a <span *ngIf="isEditMode" class="text-xs text-gray-500">(Opcional, solo si desea cambiarla)</span>
          </label>
          <input id="password" formControlName="password" type="password" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
          <app-form-control-error [control]="usuarioForm.get('password')"></app-form-control-error>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Departamento -->
        <div>
          <label for="departamento" class="block text-sm font-medium text-gray-700">Departamento</label>
          <select id="departamento" formControlName="departamentoId" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            <option [ngValue]="null" disabled>Seleccione un departamento</option>
            <option *ngFor="let depto of departamentos$ | async" [ngValue]="depto.id">{{ depto.nombre }}</option>
          </select>
          <app-form-control-error [control]="usuarioForm.get('departamentoId')"></app-form-control-error>
        </div>

        <!-- Puesto -->
        <div>
          <label for="puesto" class="block text-sm font-medium text-gray-700">Puesto</label>
          <input id="puesto" formControlName="puesto" type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Rol -->
        <div>
          <label for="rol" class="block text-sm font-medium text-gray-700">Rol</label>
          <select id="rol" formControlName="rol" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            <option [ngValue]="null" disabled>Seleccione un rol</option>
            <option *ngFor="let rol of roles" [ngValue]="rol">{{ rol }}</option>
          </select>
          <app-form-control-error [control]="usuarioForm.get('rol')"></app-form-control-error>
        </div>

        <!-- Estado -->
        <div>
          <label for="estado" class="block text-sm font-medium text-gray-700">Estado</label>
          <select id="estado" formControlName="estado" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
            <option value="Activo">Activo</option>
            <option value="Inactivo">Inactivo</option>
          </select>
          <app-form-control-error [control]="usuarioForm.get('estado')"></app-form-control-error>
        </div>
      </div>

      <!-- Botones de Acci칩n -->
      <div class="flex justify-end space-x-4 pt-4">
        <a routerLink="/usuarios" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg shadow-md">
          Cancelar
        </a>
        <button type="submit" [disabled]="usuarioForm.invalid" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg shadow-md disabled:bg-indigo-300 disabled:cursor-not-allowed">
          {{ isEditMode ? 'Actualizar Usuario' : 'Crear Usuario' }}
        </button>
      </div>

    </form>
  </div>
</div>
